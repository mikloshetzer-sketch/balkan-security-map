name: Get WordPress refresh token

on:
  workflow_dispatch:

jobs:
  token:
    runs-on: ubuntu-latest
    steps:
      - name: Request refresh token
        run: |
          curl -sS -X POST "https://public-api.wordpress.com/oauth2/token" \
            --data-urlencode "client_id=133140" \
            --data-urlencode "client_secret=${{ secrets.WP_CLIENT_SECRET }}" \
            --data-urlencode "redirect_uri=https://mikloshetzer-sketch.github.io/balkan-security-map/" \
            --data-urlencode "code=QU510Xfz4r" \
            --data-urlencode "grant_type=authorization_code"
